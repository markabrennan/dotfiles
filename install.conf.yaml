- defaults:
    link:
      relink: true

- clean: ['~']

- create:
    - ~/dotfiles/vim/undo-history
    - ~/dotfiles/vim/plugged
    - ~/dotfiles/vim/autoload
    - ~/dotfiles/vim/colors


- link:
    ~/.vim: vim
    ~/.vimrc: vimrc
    ~/.zshrc: zshrc
    ~/.zprofile: zprofile
    # Note that oh-my-zsh is s submodule, and linked as such;
    # additionally, my oh-my-zsh plugins are also managed
    # as submodules, and linked as such.
    ~/.oh-my-zsh: ohmyzsh
    ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions: zsh-autosuggestions
    ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting: zsh-syntax-highlighting
    ~/.oh-my-zsh/custom/plugins/zsh-vi-mode: zsh-vi-mode
    ~/.oh-my-zsh/custom/plugins/zsh-bat: zsh-bat
    ~/.gitconfig: gitconfig
    ~/.gitignore: gitignore
    # Likewise, vim-plug, the paper color theme, and coc.nvim
    # are managed as submodules, and linked as such.
    ~/.vim/autoload/plug.vim: vim-plug/plug.vim
    ~/.vim/plugged/coc.nvim: coc.nvim
    ~/.vim/colors/PaperColor.vim: papercolor-theme/colors/PaperColor.vim 

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - command: ./setup_homebrew.zsh
      stdout: true
      stderr: true
    - command: command -v npm || brew install npm
      stdin: true
      stdout: true
    - cd coc.nvim && npm install && npm ci
    - vim -es -u vimrc -i NONE -c "PlugInstall" -c "qa"
    - vim -es -u vimrc -i NONE -c "PlugUpdate" -c "qa"
    - vim -es -u vimrc -i NONE -c "CocInstall coc-pyright" -c "qa"


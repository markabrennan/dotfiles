- defaults:
    link:
      relink: true

- clean: ['~']

- create:
    - ~/dotfiles/vim/undo-history
    - ~/dotfiles/vim/bundle

- link:
    ~/.vim: vim
    ~/.vimrc: vimrc
    ~/.zshrc: zshrc
    ~/.zprofile: zprofile
    ~/.gitconfig: gitconfig
    ~/.gitignore: gitignore
    ~/.vim/bundle/Vundle.vim: Vundle.vim
    ~/.vim/bundle/coc.nvim: coc.nvim

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - command: command -v npm || brew install npm
      stdin: true
      stdout: true
    - cd coc.nvim && npm ci
    # This is necessary, but may not work via script, so would
    # have to be run manually inside Vim, as `:CocInstall coc-pyright`
    - vim -c 'PluginInstall' =c 'qa!'
    - vim -c 'CocInstall coc-pyright' -c 'qa!'

